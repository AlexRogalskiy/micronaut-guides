import io.micronaut.guides.GenerateGuidesTask

ext {
    micronautVersion = new File('version.txt').text
    distFolder = new File("${project.buildDir}/dist")
}

task micronautErrorHandling(type: GenerateGuidesTask) {
    output = distFolder
    asciidocFileName = 'micronaut-error-handling.adoc'
    guideName = 'micronaut-error-handling'
    guideTitle = 'Error Handling'
    micronaut = micronautVersion
    guideIntro = 'Learn about Error handling in Micronaut.'
    authors = ['Sergio del Amo']
    features = ['micronaut-error-handling', 'graalvm', 'views-velocity']
    languages = ['java']
    testFramework = 'spock'
    group 'guides'
}

task creatingYourFirstMicronautApp(type: GenerateGuidesTask) {
    output = distFolder
    asciidocFileName = 'creating-your-first-micronaut-app.adoc'
    guideName = 'creating-your-first-micronaut-app'
    guideTitle = 'Creating your first Micronaut app'
    micronaut = micronautVersion
    guideIntro = 'Learn how to create a Hello World Micronaut app with a controller and a functional test.'
    authors = ['Iván López', 'Sergio del Amo']
    features = ['guide-creating-your-first-micronaut-app', 'graalvm']
    group 'guides'
}
task generateGuides {
    dependsOn = [
            'creatingYourFirstMicronautApp',
            'micronautErrorHandling'
    ]
}
