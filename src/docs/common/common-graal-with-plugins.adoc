:exclude-for-languages:groovy

== Generate a Micronaut app's Native Image with GraalVM

We are going to use https://www.graalvm.org/[GraalVM], the polyglot embeddable virtual machine, to generate a Native image of our Micronaut application.

Native images compiled with GraalVM ahead-of-time improve the startup time and reduce the memory footprint of JVM-based applications.

=== Native Image generation

The easiest way to install GraalVM is to use https://sdkman.io/[SDKMan.io].

[source, bash]
----
% sdk list java
================================================================================
================================================================================
Available Java Versions
================================================================================
 Vendor        | Use | Version      | Dist    | Status     | Identifier
--------------------------------------------------------------------------------
...
..
.
 GraalVM       |     | 20.3.0.r11   | grl     |            | 20.3.0.r11-grl
               |     | 20.3.0.r8    | grl     |            | 20.3.0.r8-grl
               |     | 20.1.0.r11   | grl     | local only | 20.1.0.r11-grl
               |     | 20.1.0.r8    | grl     | local only | 20.1.0.r8-grl

# For Java 8
$ sdk install java 20.3.0.r8-grl

# For Java 11
$ sdk install java 20.3.0.r11-grl
----

You need to install the native-image component which is not installed by default.

[source, bash]
----
$ gu install native-image
----

:exclude-for-build:maven

To generate a native image using Gradle run:

[source, bash]
----
$ ./gradlew nativeImage
----

The native image will be built to `build/native-image/application` and can be run with `./build/native-image/application`

:exclude-for-build:

:exclude-for-build:gradle

To generate a native image using Maven run:

[source, bash]
----
$ ./mvn package -Dpackaging=native-image
----

The native image will be built to `target/application` and can be run with `./target/application`.

:exclude-for-build:

:exclude-for-languages: